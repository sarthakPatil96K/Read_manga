{% extends "base.html" %}
{% block title %}{{ manga.title }}{% endblock title %}
{% block body %}

<div class="container py-4">
  <h1 class="text-center">{{ manga.title }}</h1>
  <p>{{ manga.description }}</p>

  <!-- Show chapters only when available -->
  {% if all_chapters %}
    <h5>Chapters:</h5>
    <div class="d-flex flex-wrap gap-2 mb-4">
      {% for chapter in all_chapters %}
        <a href="{% url 'read_manga' genre=manga.genre|lower manga_title=manga.title|slugify chapter_number=chapter|slice:'8:' %}" 
          class="btn btn-outline-primary {% if chapter_number == chapter|slice:'8:'|add:'0' %}active{% endif %}">
          Chapter {{ chapter|slice:'8:' }}
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p>No chapters available yet.</p>
  {% endif %}

  <!-- Show manga page if chapter exists -->
  {% if chapter_exists %}
    <div class="text-center">
      <img src="/static/{{ manga.title|slugify }}/chapter-{{ chapter_number }}/page-1.png" class="img-fluid" alt="Manga Page">
    </div>
  {% endif %}
</div>

{% endblock body %}
